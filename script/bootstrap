#!/bin/bash

## check node installed
if ! type "node" > /dev/null; then
  echo "node is not installed"
  exit 1
fi

## check node version
if ! node --version | grep -E "v(18|20|21|22|24)" > /dev/null; then
  echo "node version should be 18, 20, 21, 22, or 24"
  exit 1
fi

## check npm installed
if ! type "npm" > /dev/null; then
  echo "npm is not installed"
  exit 1
fi

## move to frontend directory and install npm packages
cd frontend
npm ci

## check uv installed
if ! type "uv" > /dev/null; then
  echo "uv is not installed. Please install uv first: curl -LsSf https://astral.sh/uv/install.sh | sh"
  exit 1
fi

## move to backend directory and install python packages with uv
cd ../backend
uv sync
